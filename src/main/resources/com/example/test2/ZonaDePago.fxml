<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.Bloom?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.Text?>

<StackPane prefHeight="600.0" prefWidth="900.0" style="-fx-background-color: linear-gradient(to bottom, #141e30, #243b55);" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.test2.ZonaPagoController">

    <children>

        <VBox alignment="CENTER" spacing="20">
            <padding>
                <Insets bottom="20" top="20" />
            </padding>

            <!-- Tarjeta moderna -->
            <StackPane maxHeight="500" maxWidth="750">
                <children>

                    <Rectangle arcHeight="30" arcWidth="30" height="500" style="-fx-fill: rgba(15,22,40,0.96);" width="750">
                        <effect><Bloom /></effect>
                    </Rectangle>

                    <BorderPane>
                        <padding>
                            <Insets bottom="25" left="30" right="30" top="25" />
                        </padding>

                        <!-- TOP: Título + Volver -->
                        <top>
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <children>

                                    <Text style="-fx-fill: white;" text="Método de Pago">
                                        <font>
                                            <Font size="28.0" />
                                        </font>
                                    </Text>

                                    <Region HBox.hgrow="ALWAYS" />

                                    <!-- Si tienes un método en el controller, ponle onAction="#NombreMetodo" -->
                                    <Button style="-fx-background-color: #c94c4c;                                                    -fx-text-fill: white;                                                    -fx-background-radius: 8;                                                    -fx-padding: 8 18;                                                    -fx-font-weight: bold;" text="Volver" />
                                </children>
                            </HBox>
                        </top>

                        <!-- CENTER -->
                        <center>
                            <HBox spacing="25">
                                <children>

                                    <!-- TABLA DEL CARRITO -->
                                    <VBox spacing="10">
                                        <children>
                                            <Text style="-fx-fill: #9faac7;" text="Carrito">
                                                <font>
                                                    <Font size="15.0" />
                                                </font>
                                            </Text>

                                            <TableView fx:id="tablaCarrito" prefHeight="330" prefWidth="260" style="-fx-background-color: transparent;                                                               -fx-control-inner-background: rgba(10,17,35,0.9);                                                               -fx-border-color: #1391EB;                                                               -fx-border-radius: 10;                                                               -fx-background-radius: 10;">
                                                <columns>
                                                    <TableColumn fx:id="colNombreCarrito" prefWidth="120" text="Producto" />
                                                    <TableColumn fx:id="colPrecioCarrito" prefWidth="70" text="Precio" />
                                                    <TableColumn fx:id="colCantidadCarrito" prefWidth="60" text="Cant." />
                                                </columns>
                                            </TableView>
                                        </children>
                                    </VBox>

                                    <!-- DERECHA: FORMULARIO DE PAGO -->
                                    <VBox spacing="16">
                                        <children>

                                            <!-- MÉTODO DE PAGO -->
                                            <Text style="-fx-fill: #9faac7;" text="Seleccionar método">
                                                <font><Font size="14.0" /></font>
                                            </Text>
                                            <ComboBox fx:id="comboMetodoPago" prefWidth="200" style="-fx-background-radius: 8;                                                              -fx-background-color: #111828;                                                              -fx-text-fill: white;" />

                                            <!-- RUT -->
                                            <Text style="-fx-fill: #9faac7;" text="Rut (opcional)">
                                                <font><Font size="14.0" /></font>
                                            </Text>
                                            <TextField fx:id="txtRutCliente" prefWidth="200" style="-fx-background-radius: 8;                                                               -fx-background-color: #111828;                                                               -fx-text-fill: white;" />

                                            <!-- DIRECCIÓN -->
                                            <Text style="-fx-fill: #9faac7;" text="Dirección">
                                                <font><Font size="14.0" /></font>
                                            </Text>
                                            <TextField fx:id="txtDireccion" prefWidth="200" style="-fx-background-radius: 8;                                                               -fx-background-color: #111828;                                                               -fx-text-fill: white;" />

                                            <!-- DESCRIPCIÓN -->
                                            <Text style="-fx-fill: #9faac7;" text="Descripción">
                                                <font><Font size="14.0" /></font>
                                            </Text>
                                            <TextArea fx:id="txtDescripcion" editable="false" prefHeight="90" prefWidth="260" style="-fx-background-radius: 8; -fx-control-inner-background: #1118; -fx-text-fill: white;" />

                                            <!-- MONTO TOTAL -->
                                            <Text fx:id="lblMontoTotal" style="-fx-fill: #37cf6b;" text="Monto Total $ 0">
                                                <font>
                                                    <Font size="18.0" />
                                                </font>
                                            </Text>

                                            <!-- ERROR -->
                                            <Text fx:id="textoerror" style="-fx-fill: #ff5757;" text="">
                                                <font>
                                                    <Font size="14.0" />
                                                </font>
                                            </Text>

                                        </children>
                                    </VBox>
                                </children>
                            </HBox>
                        </center>

                        <!-- BOTTOM: botón pagar -->
                        <bottom>
                            <HBox alignment="CENTER_RIGHT">
                                <children>
                                    <Button onAction="#realizarPago" style="-fx-background-color: #4caf50;                                                    -fx-background-radius: 10;                                                    -fx-text-fill: white;                                                    -fx-font-weight: bold;                                                    -fx-padding: 10 20;" text="Realizar Pago" />
                                </children>
                            </HBox>
                        </bottom>

                    </BorderPane>

                </children>
            </StackPane>

        </VBox>

    </children>

</StackPane>
